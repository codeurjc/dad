# This configuration is a simplified example of how to use SSL Termination with ssl (https) on front (haproxy) with haproxy certificates loaded from a directory,
# and plain http backends (web application does not have https enabled)
# The example provides a statistics page on /stats?admin.
# No load balancing mode is specified, therefore http (level 7) is used by default.

global
	maxconn 100

defaults
	mode http
	timeout connect 5s
	timeout client 5s
	timeout server 5s

frontend myfrontend
	# certificates generated with generate-self-signed-cert.sh
	bind :443 ssl crt /etc/cert/server.pem
	default_backend mybackend

backend mybackend
	# a http backend (no ssl)
	server s1 ejem4-haproxy-web-1:8080 check
	server s2 ejem4-haproxy-web-2:8080 check
	stats enable
    stats hide-version
    stats scope   .
    stats uri     /admin?stats
